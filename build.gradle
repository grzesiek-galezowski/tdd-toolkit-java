buildscript {
    repositories {
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath "info.solidsoft.gradle.pitest:gradle-pitest-plugin:1.1.6"
    }
}

apply plugin: "info.solidsoft.pitest"
apply plugin: 'java'
apply plugin: 'maven'

group 'com.github.grzesiek-galezowski'
version '1.0.4-SNAPSHOT'
description = """TDD Toolkit"""

test {
    useTestNG()
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

configurations.all {

}


pitest {
    targetClasses = ['com.github.grzesiek_galezowski.test_environment.*']  //by default "${project.group}.*"
    threads = 4
    outputFormats = ['XML', 'HTML']
}

repositories {
    mavenCentral()
}

dependencies {
    compile "com.google.guava:guava:19.+"
    compile "org.assertj:assertj-core:3.+"
    compile "org.testng:testng:6.+"
    compile "org.mockito:mockito-core:1.+"
    compile "com.github.autofixture:autofixturegenerator:1.+"
    compile "com.google.code.gson:gson:2.5"

}

uploadArchives {
    repositories {
        mavenDeployer {
            repository(url: "${nexusUrl}/content/repositories/releases") {
                authentication(userName: nexusUsername, password: nexusPassword)
            }
            snapshotRepository(url: "${nexusUrl}/content/repositories/snapshots") {
                authentication(userName: nexusUsername, password: nexusPassword)
            }
        }
    }
}
uploadArchives.dependsOn([jar, test])
